VK-SCRAPER
==========

Скрапер, который позволяет собрать базу данных пользователей вконткате, вместе со связями между ними.

Установка зависимостей
----------------------

```
pip install -r requirements.txt
```

Подготовка
----------

Создайте базу данных postgresql

```
createdb vk_parse
```

Скопируйте файл settings.py.sample в settings.py

```
cp vk/settings.py.sample vk/settings.py
```


Отредактируйте файлик settings.py

Укажите свои параметры подключения к БД

```python
DATABASE_CONNECTION = {}
```

Заполните список id пользователей вконтакте, друзья которых будут использоваться для заполнения БД
```python
START_IDS = [] 
```

Настройте глубину поиска, 
    
```python
DEPTH = 3
```

параметр определяющий глубину поиска отношений друг-друга,

* 1 -- скачает только пользователей из списка START_IDS
* 2 -- скачает то же что при 1 + всех друзей из списка START_IDS
* 3 -- скачает то же что при 2 + всех друзей друзей из списка START_IDS
* 4 -- и т.д.

Больше 3 ставить не рекомендуется, при 10 начальных пользователей, значение глубины в 3 дает примерно полмиллиона пользователей, по времени занимает где-то 10 минут. Значение 4 -- десятки миллионов пользователей, закачка может занять несколько дней, и вряд ли вк скажет вам спасибо =)

Для избежания бана вашего основного ip, рекомендую использовать прокси, подставить какой-нибудь рабочий

```python
PROXY_URL = ""
```

Запуск
------

Создайте таблички в БД:

```
python vk/db.py
```

запустите паука

```
scrapy crawl vk_friends
```

ожидайте =)
